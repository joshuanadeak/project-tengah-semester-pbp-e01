{% extends 'base.html' %}

{% load static %} {% block meta %}
<title>Discussion</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />

<!-- Google fonts yang di download yang dipake dilanding page ada font NewsReader, Mulish, Kanit & Signika-->
<link rel="preconnect" href="https://fonts.gstatic.com" />
<link href="https://fonts.googleapis.com/css2?family=Newsreader:ital,wght@0,600;1,600&amp;display=swap" rel="stylesheet" />
<link href="https://fonts.googleapis.com/css2?family=Mulish:ital,wght@0,300;0,500;0,600;0,700;1,300;1,500;1,600;1,700&amp;display=swap" rel="stylesheet" />
<link href="https://fonts.googleapis.com/css2?family=Kanit:ital,wght@0,400;1,400&amp;display=swap" rel="stylesheet" />
<link href='https://fonts.googleapis.com/css?family=Signika' rel='stylesheet'>
<link rel="stylesheet" href="{% static 'css/style.css' %}" /> {% endblock meta %} {% block content %}

<body class="discussion">
    <section class="bg-dark">
        <h2 class="text-center text-light font-alt display-3 lh-1 mb-4">Learn by Watching</h2>
        <hr class="bg-primary w-50 mx-auto">
        <div class="container px-5">
            <div class="row gx-5 align-items-center justify-content-center justify-content-lg-between">
                <div class="col-12 col-lg-5">
                    <h2 class="display-4 lh-1 mb-4 text-gradient">Trading vs Investing</h2>
                    <p class="lead fw-normal text-muted mb-5 mb-lg-0">
                        Having problems to differ between Trading and Investing? This video will help you to understand the difference between them.
                    </p>
                    </p>
                </div>
                <div class="col-sm-8 col-md-6">
                    <div class="px-5 px-sm-0">
                        <iframe width="560" style="margin-left: 0;" height="315" src="https://www.youtube.com/embed/dmqoqVwFopE" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    </div>
                </div>
            </div>
        </div>
        <div class="container px-5 py-5">
            <div class="row gx-5 align-items-center justify-content-center justify-content-lg-between">
                <div class="col-sm-8 col-md-6">
                    <div class="px-5 px-sm-0">
                        <iframe width="560" height="315" src="https://www.youtube.com/embed/p7HKvqRI_Bo" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>                        </div>
                </div>
                <div class="col-12 col-lg-5">
                    <h2 class="display-4 lh-1 mb-4 text-gradient">How Stock Market Works</h2>
                    <p class="lead fw-normal text-muted mb-5 mb-lg-0">
                        Curious about how stock market works? Here is the right place to discuss about it!
                    </p>
                    </p>
                </div>
            </div>
        </div>
        <div class="container px-5">
            <div class="row gx-5 align-items-center justify-content-center justify-content-lg-between">
                <div class="col-12 col-lg-5">
                    <h2 class="display-4 lh-1 mb-4 text-gradient">Trading for Beginners</h2>
                    <p class="lead fw-normal text-muted mb-5 mb-lg-0">
                        New to trading? Start your journey here! We will teach you how to trade!
                    </p>
                </div>
                <div class="col-sm-8 col-md-6">
                    <div class="px-5 px-sm-0">
                        <iframe width="560" height="315" src="https://www.youtube.com/embed/y7iVTTH5tOA" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section class="bg-light">
        <h2 class="text-center text-dark font-alt display-3 lh-1 mb-4">Learn by Reading</h2>
        <hr class="bg-primary w-50 mx-auto">
        <div class="container px-5">
            <div class="row gx-5 align-items-center justify-content-center justify-content-lg-between">
                <div class="col-12 col-lg-8">
                    <h2 class="display-4 lh-1 mb-4 text-gradient">The Simple Path to Wealth</h2>
                    <p class="lead fw-normal text-muted mb-5 mb-lg-0">
                        The book is formed from a series of letters that Collins wrote to his daughter over his 40+ years of investing. It covers money, financial independence, and lessons from his own investing.
                        <br>
                        <br> You’ll also learn everything from managing debt, the stock market, ways to invest, asset allocation, how to avoid investing scams, how to achieve financial independence, and more. </p>
                    </p>
                    <a href="https://www.amazon.com/gp/product/1533667926/" class="btn btn-primary btn-lg px-4 mt-4">Buy Now</a>
                </div>
                <div class="col-sm-8 col-md-3">
                    <div class="px-5 px-sm-0"><img class="img-fluid" src="https://d1b14unh5d6w7g.cloudfront.net/1533667926.01.S001.LXXXXXXX.jpg?Expires=1667039467&Signature=crx4SgdKoCFgWkNKxi5zKjv2cAocddewEw0YJxQ2urXLG9r0u9YWR804BKxMW5QB6C0yMK2EAIhQFHPFXNbdK87j2XpyRqXfZoOywBwVhN5QJUYT12T42mc6feRs4XZEXn9zpjngmDwSKPxy-K6FuMvEN2M5E3Wfol36bxT8lYE_&Key-Pair-Id=APKAIUO27P366FGALUMQ"
                            alt="..." /></div>
                </div>
            </div>
        </div>
        <div class="container px-5 mt-4">
            <div class="row gx-5 align-items-center justify-content-center justify-content-lg-between">
                <div class="col-sm-8 col-md-3">
                    <div class="px-5 px-sm-0"><img class="img-fluid" src="https://d374oxlv7wyffd.cloudfront.net/B000FC12C8/8783476e/cover.jpeg" alt="..." /></div>
                </div>
                <div class="col-12 col-lg-8">
                    <h2 class="display-4 lh-1 mb-4 text-gradient">The Intelligent Investor</h2>
                    <p class="lead fw-normal text-muted mb-5 mb-lg-0">
                        Chapters cover investment vs. speculation, the investor and inflation, general portfolio strategy, stock selection for both the enterprising and defensive investors, comparisons of companies, and many other subjects. To bolster the book’s relevance, Wall
                        Street Journal columnist Jason Zweig added commentary after each chapter with recent examples. </p>
                    </p>
                    <a href="https://www.amazon.com/dp/B000FC12C8" class="btn btn-primary btn-lg px-4 mt-4">Buy Now</a>
                </div>
            </div>
        </div>
    </section>
    <section class="bg-dark">
        <h2 class="text-center text-light font-alt display-3 lh-1 mb-4">Learn by Asking</h2>
        <hr class="bg-primary w-50 mx-auto">
        <div class="container px-5" id="container" style="max-width: 768px;">
            {% if is_empty %}
            <h4 class="display-6 text-center mt-4 lh-1 text-white">No questions yet!</h4>
            {% endif %}
        </div>
    </section>
    {% if logged_in %}
    <section class="bg-gradient-primary-to-secondary">
        <div class="container px-5" id="container" style="max-width: 768px;">
            <h2 class="text-center text-white font-alt">Add new Discussion</h2>
            <br>
            <form method="POST" class="form-floating">
                {% csrf_token %}
                <div class="form-floating mb-3">
                    <input type="text" class="form-control" id="title" placeholder="Discussion Title" name="title" />
                    <label class="form-label" for="title">Title</label>
                </div>
                <div class="d-grid gap">
                    <button class="btn btn-primary btn-lg" type="submit">Submit</button>
                </div>

            </form>
        </div>
    </section>
    {% else %}
    <section class="bg-gradient-primary-to-secondary">
        <div class="container px-5">
            <h2 class="text-center text-white font-alt">Have anything to ask? <br> Login to ask a question</h2>
        </div>
    </section>
    {% endif %}
</body>
{% endblock content %}
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<script>
    $(document).ready(function() {
        $.ajax({
            url: "{% url 'elearning:discussion_list' %}",
            type: "GET",
            success: function(data) {
                if (data.length == 0) {
                    $("#container").append(
                        `<h4 class="display-6 text-center mt-4 lh-1 text-white">No questions yet!</h4>`
                    );
                } else {
                    data.forEach((discussion) => {
                        let link = "<a href=" + "'/elearning/discussion/" + discussion.id + "'" + " class='text-decoration-none text-white'>" + "View Replies" + "</a>";
                        $("#container").append(
                            `<div class="row gx-5 align-items-center justify-content-center justify-content-lg-between my-4">
                                <div class="border border-1 border-success rounded-3 py-3">
                                    <h2 class="display-4 lh-1 text-gradient">${discussion.title}</h2>
                                    <p class="text-white-50">${discussion.created_at} by ${discussion.user}</p>` + link + `</div>
                            </div>`
                        );
                    });
                }
            },
        });
    });


    $(document).ready(function() {
        $('form').submit(function(e) {
            e.preventDefault();
            $.ajax({
                type: 'POST',
                url: '{% url "elearning:add_discussion" %}',
                data: {
                    title: $('#title').val(),
                    csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val(),
                },
                success: function() {
                    location.reload();
                },
                error: function() {
                    alert('error');
                },
            });
        });
    });
</script>